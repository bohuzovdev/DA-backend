<h1 id="api-version-010">API version 0.1.0</h1>
<h2 id="methods">Methods</h2>
<p>For this version of API <code>{prefix}</code> should be replaced with <code>api0.1</code>. On success server responds with code 200, other codes are used only in case of errors. Server returns data as JSON object/dictionary.</p>
<h3 id="sign-in">Sign in</h3>
<p><code>POST {prefix}/session/new</code></p>
<p>Sign up/sign in and create session</p>
<h4 id="request">request</h4>
<table>
<thead>
<tr>
<th>field</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td><code>type</code></td>
<td><code>string</code></td>
<td>Login method. Either <code>&#39;wechat&#39;</code> or <code>&#39;apple&#39;</code></td>
</tr>
<tr>
<td><code>token</code></td>
<td><code>string</code></td>
<td>Authentication token</td>
</tr>
</tbody></table>
<h4 id="response">response</h4>
<p>Returns an object with following fields:</p>
<table>
<thead>
<tr>
<th>field</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td><code>session</code></td>
<td><code>string</code></td>
<td>session token to use in consequent requests</td>
</tr>
<tr>
<td><code>state</code></td>
<td><code>string</code></td>
<td>current state of account</td>
</tr>
</tbody></table>
<h3 id="get-user-info">Get user info</h3>
<p><code>GET {prefix}/user</code></p>
<p>Get information about account or session.</p>
<h4 id="request-1">request</h4>
<table>
<thead>
<tr>
<th>field</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td><code>session</code></td>
<td><code>string</code></td>
<td><a href="#sign-in">Session token</a></td>
</tr>
<tr>
<td><code>fields</code></td>
<td><code>[string]</code></td>
<td>List of fields that should be returned</td>
</tr>
</tbody></table>
<h4 id="response-1">response</h4>
<p>Returns an object with requested fields. May also include unrequested fields.</p>
<h3 id="update-user-info">Update user info</h3>
<p><code>UPDATE {prefix}/user</code></p>
<h4 id="request-2">request</h4>
<table>
<thead>
<tr>
<th>field</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td><code>session</code></td>
<td><code>string</code></td>
<td><a href="#sign-in">Session token</a></td>
</tr>
<tr>
<td>see <a href="#user">User object</a></td>
<td></td>
<td>New values of the fields. Only mutable fields can be updated</td>
</tr>
</tbody></table>
<h2 id="objects">Objects</h2>
<h3 id="user">User</h3>
<p>Contains all information about the account.</p>
<table>
<thead>
<tr>
<th>field</th>
<th>type</th>
<th>description</th>
<th>mutable</th>
</tr>
</thead>
<tbody><tr>
<td><code>id</code></td>
<td><code>number</code> | <code>int</code></td>
<td>ID of account</td>
<td>no</td>
</tr>
<tr>
<td><code>hasWechat</code></td>
<td><code>bool</code></td>
<td><code>true</code> if user can sign in using Wechat</td>
<td>no</td>
</tr>
<tr>
<td><code>hasApple</code></td>
<td><code>bool</code></td>
<td><code>true</code> if user can sign in using AppleID</td>
<td>no</td>
</tr>
<tr>
<td><code>state</code></td>
<td><code>string</code></td>
<td>Current <a href="#account-state">state</a> of account</td>
<td>no</td>
</tr>
<tr>
<td><code>age</code></td>
<td><code>number</code> | <code>int</code></td>
<td>User&#39;s age</td>
<td>yes</td>
</tr>
<tr>
<td><code>gender</code></td>
<td><code>string</code></td>
<td>Either <code>man</code> or <code>woman</code></td>
<td>yes</td>
</tr>
<tr>
<td><code>prefAge</code></td>
<td><code>number</code> | <code>int</code></td>
<td>Age preference of user</td>
<td>yes</td>
</tr>
</tbody></table>
<h4 id="account-state">Account state</h4>
<table>
<thead>
<tr>
<th>value</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td><code>&quot;new&quot;</code></td>
<td>Account doesn&#39;t have any information, can&#39;t be used</td>
</tr>
<tr>
<td><code>&quot;active&quot;</code></td>
<td>Account has all required information to be used</td>
</tr>
<tr>
<td><code>&quot;blocked&quot;</code></td>
<td>Account can&#39;t be used anymore</td>
</tr>
</tbody></table>

